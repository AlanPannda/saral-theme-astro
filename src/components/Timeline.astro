---
type Props = {
	items: Array<{
		title: string
		date: string
		description?: string
		href?: string
	}>
}

const { items } = Astro.props
---

<div class="relative">
	{
		items.map((item, index) => (
			<div class="flex gap-4 relative">
				{/* Timeline dot and line container */}
				<div class="flex flex-col items-center relative w-3 shrink-0">
					{/* Dot - aligned with text baseline */}
					<div class="w-3 h-3 rounded-full bg-primary dark:bg-primary-dark shrink-0 mt-[3px] z-10" />

					{/* Vertical line */}
					{index !== items.length - 1 && (
						<div class="w-0.5 bg-gray-200 dark:bg-gray-800 flex-1" />
					)}
				</div>

				{/* Content */}
				<div class="pb-8 flex-1">
					{item.href ? (
						<a
							href={item.href}
							class="group hover:text-primary dark:hover:text-primary-dark transition-colors block"
						>
							<h3 class="font-semibold text-sm group-hover:underline leading-tight">
								{item.title}
							</h3>
							<p class="text-xs opacity-60 mt-1">{item.date}</p>
							{item.description && (
								<p class="text-sm opacity-70 mt-2 line-clamp-2">
									{item.description}
								</p>
							)}
						</a>
					) : (
						<>
							<h3 class="font-semibold text-sm leading-tight">{item.title}</h3>
							<p class="text-xs opacity-60 mt-1">{item.date}</p>
							{item.description && (
								<p class="text-sm opacity-70 mt-2 line-clamp-2">
									{item.description}
								</p>
							)}
						</>
					)}
				</div>
			</div>
		))
	}
</div>
